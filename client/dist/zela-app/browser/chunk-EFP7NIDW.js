import{$ as Se,A as U,B as l,C as c,D as w,E as p,F as d,G as V,H as b,I as B,J as x,K as k,L as f,M as ve,N as we,O as Ce,P as A,Q as s,R as j,S as g,T as N,U as H,V as O,W as Y,X as ee,Y as Ee,Z as L,_ as $,a as Z,aa as M,b as q,c as ue,ca as te,d as fe,e as Q,f as he,g as ge,h as X,ha as oe,i as be,j as C,k as m,ka as ie,l as u,la as re,m as _,ma as ne,n as D,na as z,p as v,q as P,r as n,s as E,t as S,u as xe,v as y,w as K,x as _e,y as T,z as R}from"./chunk-SSUJB3ND.js";var I=class i{constructor(o,e){this.http=o;this.router=e}apiUrl="http://localhost:3000/api";tokenKey="auth_token";userKey="user_data";isAuthenticatedSubject=new ue(this.hasToken());currentUserSubject=new ue(this.getUserFromStorage());login(o){return this.http.post(`${this.apiUrl}/auth/login`,o).pipe(ge(e=>{this.setToken(e.token),this.setUser(e.user),this.isAuthenticatedSubject.next(!0),this.currentUserSubject.next(e.user)}),he(e=>(this.clearAuthData(),fe(()=>e))))}register(o){return this.http.post(`${this.apiUrl}/auth/register`,o).pipe(ge(e=>{this.setToken(e.token),this.setUser(e.user),this.isAuthenticatedSubject.next(!0),this.currentUserSubject.next(e.user)}),he(e=>(this.clearAuthData(),fe(()=>e))))}logout(){this.clearAuthData(),this.isAuthenticatedSubject.next(!1),this.currentUserSubject.next(null),this.router.navigate(["/login"])}isAuthenticated(){return this.isAuthenticatedSubject.asObservable()}get isAuthenticatedValue(){return this.isAuthenticatedSubject.value}getCurrentUser(){return this.currentUserSubject.asObservable()}get currentUserValue(){return this.currentUserSubject.value}getToken(){return localStorage.getItem(this.tokenKey)}isTokenExpiring(){let o=this.getToken();if(!o)return!0;try{let t=JSON.parse(atob(o.split(".")[1])).exp*1e3,r=Date.now(),a=300*1e3;return t-r<a}catch{return!0}}setToken(o){localStorage.setItem(this.tokenKey,o)}setUser(o){localStorage.setItem(this.userKey,JSON.stringify(o))}hasToken(){return!!this.getToken()}getUserFromStorage(){let o=localStorage.getItem(this.userKey);return o?JSON.parse(o):null}clearAuthData(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.userKey)}static \u0275fac=function(e){return new(e||i)(be(te),be(oe))};static \u0275prov=X({token:i,factory:i.\u0275fac,providedIn:"root"})};var W=class i{http=C(te);authService=C(I);apiUrl="http://localhost:3000/api/reports";_reports=v([]);reports=Ee(()=>this._reports());constructor(){this.loadReports()}async loadReports(){try{let o=await Q(this.http.get(this.apiUrl));this._reports.set(o)}catch(o){console.error("Erro ao carregar reports:",o)}}async addReport(o){try{let e=await Q(this.http.post(this.apiUrl,o));return this._reports.update(t=>[e,...t]),e}catch(e){throw console.error("Erro ao adicionar report:",e),e}}async addSupport(o){try{await Q(this.http.patch(`${this.apiUrl}/${o}/support`,{})),this._reports.update(e=>e.map(t=>t.id===o?q(Z({},t),{apoios:t.apoios+1}):t))}catch(e){console.error("Erro ao apoiar report:",e)}}async patrocinar(o,e){let t=this.authService.currentUserValue;return!t||t.balance<e.cost?!1:(this._reports.update(r=>r.map(a=>a.id===o?q(Z({},a),{isPatrocinado:!0,nivelPatrocinio:e.id,zelasAcumulados:a.zelasAcumulados+e.cost}):a)),!0)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=X({token:i,factory:i.\u0275fac,providedIn:"root"})};var De=["scrollContainer"];function Te(i,o){if(i&1&&(p(0,"div",9),V(1,"img",19),d()),i&2){let e=o.$implicit;n(),B("src",e,P)}}function Re(i,o){if(i&1&&V(0,"div"),i&2){let e=o.$index,t=f(2);A("w-1.5 h-1.5 rounded-full transition-all "+(t.currentIndex()===e?"bg-white w-4":"bg-white/50"))}}function Ve(i,o){if(i&1){let e=b();p(0,"button",20),k("click",function(){m(e);let r=f();return u(r.scrollPrev())}),_(),p(1,"svg",21),V(2,"path",22),d()(),D(),p(3,"button",23),k("click",function(){m(e);let r=f();return u(r.scrollNext())}),_(),p(4,"svg",21),V(5,"path",24),d()(),D(),p(6,"div",25),T(7,Re,1,2,"div",26,K),d()}if(i&2){let e=f();n(7),R(e.report().photos)}}var ae=class i{report=$.required();support=L();sponsor=L();scrollContainer;currentIndex=v(0);onScroll(o){let e=o.target,t=Math.round(e.scrollLeft/e.offsetWidth);this.currentIndex()!==t&&this.currentIndex.set(t)}scrollPrev(){this.scrollContainer.nativeElement.scrollLeft-=this.scrollContainer.nativeElement.offsetWidth}scrollNext(){this.scrollContainer.nativeElement.scrollLeft+=this.scrollContainer.nativeElement.offsetWidth}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-report-card"]],viewQuery:function(e,t){if(e&1&&ve(De,5),e&2){let r;we(r=Ce())&&(t.scrollContainer=r.first)}},inputs:{report:[1,"report"]},outputs:{support:"support",sponsor:"sponsor"},decls:34,vars:7,consts:[["scrollContainer",""],[1,"bg-white","border","border-gray-100","rounded-[2.5rem]","p-6","shadow-sm","mb-6","hover:shadow-md","transition-shadow"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-[10px]","font-black","text-blue-500","bg-blue-50","px-3","py-1","rounded-full","uppercase","tracking-widest"],[1,"text-[10px]","font-bold","text-gray-400","uppercase","tracking-tighter"],[1,"text-lg","font-black","text-slate-800","uppercase","italic","mb-1"],[1,"text-xs","text-gray-500","mb-4","line-clamp-2","leading-relaxed"],[1,"relative","group","mb-4"],[1,"flex","gap-2","overflow-x-auto","pb-2","scrollbar-hide","snap-x","snap-mandatory","scroll-smooth",3,"scroll"],[1,"flex-shrink-0","w-full","aspect-video","bg-slate-100","rounded-3xl","overflow-hidden","shadow-inner","snap-center"],[1,"absolute","bottom-10","left-4","bg-white/80","backdrop-blur-md","px-3","py-1","rounded-full","text-[9px]","font-bold","flex","items-center","gap-1"],[1,"flex","gap-4","mb-6"],[1,"flex-1","bg-slate-50","rounded-2xl","p-3","text-center","border","border-slate-100"],[1,"text-[9px]","font-black","text-gray-400","uppercase","mb-1","tracking-widest"],[1,"text-sm","font-black","text-amber-600"],[1,"text-sm","font-black","text-blue-600"],[1,"grid","grid-cols-2","gap-3"],[1,"py-4","rounded-2xl","bg-amber-50","text-[10px]","font-black","uppercase","text-amber-600","border","border-amber-100","active:scale-95","transition-transform","hover:bg-amber-100",3,"click"],[1,"py-4","rounded-2xl","bg-blue-50","text-[10px]","font-black","uppercase","text-blue-600","border","border-blue-100","active:scale-95","transition-transform","hover:bg-blue-100",3,"click"],[1,"w-full","h-full","object-cover",3,"src"],[1,"absolute","left-2","top-1/2","-translate-y-1/2","w-8","h-8","bg-white/90","backdrop-blur","rounded-full","flex","items-center","justify-center","shadow-lg","text-slate-800","opacity-0","group-hover:opacity-100","transition-opacity",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-width","3","d","M15 19l-7-7 7-7"],[1,"absolute","right-2","top-1/2","-translate-y-1/2","w-8","h-8","bg-white/90","backdrop-blur","rounded-full","flex","items-center","justify-center","shadow-lg","text-slate-800","opacity-0","group-hover:opacity-100","transition-opacity",3,"click"],["stroke-width","3","d","M9 5l7 7-7 7"],[1,"absolute","bottom-4","left-1/2","-translate-x-1/2","flex","gap-1.5","px-2","py-1","bg-black/20","backdrop-blur-md","rounded-full"],[3,"class"]],template:function(e,t){if(e&1){let r=b();p(0,"div",1)(1,"div",2)(2,"span",3),s(3),d(),p(4,"span",4),s(5,"H\xE1 2 horas"),d()(),p(6,"h3",5),s(7),d(),p(8,"p",6),s(9),d(),p(10,"div",7)(11,"div",8,0),k("scroll",function(h){return m(r),u(t.onScroll(h))}),T(13,Te,2,1,"div",9,K),d(),p(15,"div",10),s(16),d(),S(17,Ve,9,0),d(),p(18,"div",11)(19,"div",12)(20,"p",13),s(21,"Fundo atual"),d(),p(22,"p",14),s(23),d()(),p(24,"div",12)(25,"p",13),s(26,"Apoiadores"),d(),p(27,"p",15),s(28),d()()(),p(29,"div",16)(30,"button",17),k("click",function(){return m(r),u(t.sponsor.emit(t.report().id))}),s(31," Patrocinar "),d(),p(32,"button",18),k("click",function(){return m(r),u(t.support.emit(t.report().id))}),s(33," Apoiar Causa "),d()()()}e&2&&(n(3),g(" ",t.report().category," "),n(4),j(t.report().title),n(2),j(t.report().description),n(4),R(t.report().photos),n(3),g(" \u{1F4CD} ",t.report().location," "),n(),y(t.report().photos.length>1?17:-1),n(6),g("\u2B50 ",t.report().zelasAcumulados),n(5),g("\u{1F465} ",t.report().apoios))},dependencies:[M],encapsulation:2,changeDetection:0})};var Ae=(i,o)=>o.id;function Ie(i,o){if(i&1){let e=b();p(0,"button",11),k("click",function(){let r=m(e).$implicit,a=f();return u(a.selectedOption.set(r))}),p(1,"div",12)(2,"div"),s(3),d(),p(4,"div")(5,"h4",13),s(6),d(),p(7,"p",14),s(8),d()()(),p(9,"div",15)(10,"span",16),s(11),d()()()}if(i&2){let e,t=o.$implicit,r=f();A("w-full flex items-center justify-between p-5 rounded-3xl border-2 transition-all "+(((e=r.selectedOption())==null?null:e.id)===t.id?"border-blue-600 bg-blue-50/50":"border-slate-100 hover:border-slate-200")),n(2),A("w-12 h-12 rounded-2xl flex items-center justify-center text-xl "+t.color),n(),g(" ",t.id==="BRONZE"?"\u{1F949}":t.id==="PRATA"?"\u{1F948}":"\u{1F947}"," "),n(3),j(t.label),n(2),j(t.boost),n(3),g("",t.cost," Z")}}var le=class i{close=L();success=L();selectedOption=v(null);options=[{id:"BRONZE",label:"Bronze",cost:100,boost:"+24h Destaque",color:"bg-orange-100 text-orange-700"},{id:"PRATA",label:"Prata",cost:250,boost:"+72h Destaque",color:"bg-slate-100 text-slate-600"},{id:"OURO",label:"Ouro",cost:500,boost:"Destaque Vital\xEDcio",color:"bg-amber-100 text-amber-700"}];confirm(){this.selectedOption()&&this.success.emit(this.selectedOption())}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-sponsor-modal"]],outputs:{close:"close",success:"success"},decls:15,vars:1,consts:[[1,"fixed","inset-0","z-[100]","flex","items-end","sm:items-center","justify-center","p-0","sm:p-4","bg-slate-900/60","backdrop-blur-sm"],[1,"bg-white","w-full","max-w-md","rounded-t-[3rem]","sm:rounded-[3rem]","p-8","shadow-2xl","animate-in","slide-in-from-bottom","duration-300"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-xl","font-black","text-slate-900","uppercase","italic"],[1,"p-2","bg-slate-100","rounded-full",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["d","M6 18L18 6M6 6l12 12"],[1,"text-xs","font-bold","text-slate-400","uppercase","tracking-widest","mb-6"],[1,"space-y-3","mb-8"],[3,"class"],[1,"w-full","py-5","bg-slate-900","text-white","font-black","rounded-2xl","uppercase","tracking-widest","shadow-xl","active:scale-95","transition-all","disabled:opacity-50",3,"click","disabled"],[3,"click"],[1,"flex","items-center","gap-4","text-left"],[1,"font-black","text-slate-800","uppercase","italic","text-sm"],[1,"text-[10px]","font-bold","text-slate-500","uppercase"],[1,"text-right"],[1,"block","font-black","text-slate-900","text-sm"]],template:function(e,t){e&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4,"Impulsionar Alerta"),d(),p(5,"button",4),k("click",function(){return t.close.emit()}),_(),p(6,"svg",5),V(7,"path",6),d()()(),D(),p(8,"p",7),s(9,"Escolha o n\xEDvel de patroc\xEDnio para aumentar a visibilidade e prioridade desta ocorr\xEAncia."),d(),p(10,"div",8),T(11,Ie,12,8,"button",9,Ae),d(),p(13,"button",10),k("click",function(){return t.confirm()}),s(14," Confirmar Patroc\xEDnio "),d()()()),e&2&&(n(11),R(t.options),n(2),B("disabled",!t.selectedOption()))},dependencies:[M],encapsulation:2,changeDetection:0})};var se=class i{authService=C(I);balance=$.required();user=$(null);static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-header"]],inputs:{balance:[1,"balance"],user:[1,"user"]},decls:14,vars:3,consts:[[1,"bg-white","border-b","border-gray-100","px-6","py-4","flex","items-center","justify-between","sticky","top-0","z-30"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","bg-slate-100",3,"src"],[1,"text-[8px]","font-black","text-gray-400","uppercase","tracking-widest","leading-none"],[1,"text-xs","font-black","text-slate-900","uppercase","italic"],[1,"bg-amber-50","px-3","py-2","rounded-xl","border","border-amber-100"],[1,"text-xs","font-black","text-amber-700"],[1,"p-3","bg-slate-100","rounded-xl",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-slate-500"],["d","M17 16l4-4m0 0l-4-4m4 4H7"]],template:function(e,t){if(e&1&&(p(0,"header",0)(1,"div",1),V(2,"img",2),p(3,"div")(4,"p",3),s(5," Cidad\xE3o Ativo "),d(),p(6,"h1",4),s(7),d()()(),p(8,"div",5)(9,"span",6),s(10),d()(),p(11,"button",7),k("click",function(){return t.authService.logout()}),_(),p(12,"svg",8),V(13,"path",9),d()()()),e&2){let r,a,h;n(2),B("src",(r=t.user())==null?null:r.avatar,P),n(5),j((a=t.user())==null?null:a.name),n(3),g("\u2B50 ",(h=t.user())==null?null:h.balance)}},dependencies:[M],encapsulation:2,changeDetection:0})};function je(i,o){if(i&1&&(l(0,"div",6),s(1),c()),i&2){let e=f();n(),g(" ",e.errorMessage()," ")}}function Ne(i,o){if(i&1){let e=b();l(0,"input",14),O("ngModelChange",function(r){m(e);let a=f();return H(a.form.name,r)||(a.form.name=r),u(r)}),c()}if(i&2){let e=f();N("ngModel",e.form.name)}}var ce=class i{zelaService=C(W);authService=C(I);router=C(oe);isLogin=v(!0);errorMessage=v("");form={name:"",email:"",password:""};handleSubmit(){this.errorMessage.set(""),this.isLogin()?this.authService.login({email:this.form.email,password:this.form.password}).subscribe({next:()=>this.router.navigate(["/"]),error:o=>{console.error("Login error:",o),this.errorMessage.set("Falha no login. Verifique as suas credenciais.")}}):this.authService.register(this.form).subscribe({next:()=>this.router.navigate(["/"]),error:o=>{console.error("Register error:",o),this.errorMessage.set("Falha no registo. Tente novamente.")}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-auth"]],decls:19,vars:7,consts:[[1,"min-h-screen","flex","flex-col","items-center","justify-center","p-8","bg-slate-50"],[1,"w-full","max-w-sm","bg-white","p-8","rounded-[3rem]","shadow-xl","shadow-slate-200/50"],[1,"flex","flex-col","items-center","mb-10"],[1,"w-16","h-16","bg-blue-600","rounded-3xl","flex","items-center","justify-center","text-white","font-black","text-3xl","shadow-lg","shadow-blue-200","mb-6","italic"],[1,"text-2xl","font-black","text-slate-900","tracking-tighter","italic","uppercase","text-center"],[1,"text-gray-400","text-[10px]","font-bold","uppercase","tracking-widest","mt-2"],[1,"mb-4","p-4","bg-red-50","border","border-red-100","rounded-2xl","text-red-600","text-[10px]","font-black","uppercase","tracking-widest","text-center"],[1,"space-y-4"],["type","text","placeholder","NOME COMPLETO",1,"w-full","p-5","bg-slate-50","border-2","border-slate-100","rounded-2xl","font-bold","focus:border-blue-500","outline-none","transition-all","uppercase","text-xs",3,"ngModel"],["type","email","placeholder","E-MAIL",1,"w-full","p-5","bg-slate-50","border-2","border-slate-100","rounded-2xl","font-bold","focus:border-blue-500","outline-none","transition-all","uppercase","text-xs",3,"ngModelChange","ngModel"],["type","password","placeholder","PALAVRA-PASSE",1,"w-full","p-5","bg-slate-50","border-2","border-slate-100","rounded-2xl","font-bold","focus:border-blue-500","outline-none","transition-all","uppercase","text-xs",3,"ngModelChange","ngModel"],[1,"w-full","py-5","bg-slate-900","text-white","font-black","rounded-2xl","uppercase","tracking-widest","shadow-lg","active:scale-95","transition-all","mt-4",3,"click"],[1,"mt-8","text-center"],[1,"text-[10px]","font-black","text-blue-600","uppercase","tracking-widest","hover:underline",3,"click"],["type","text","placeholder","NOME COMPLETO",1,"w-full","p-5","bg-slate-50","border-2","border-slate-100","rounded-2xl","font-bold","focus:border-blue-500","outline-none","transition-all","uppercase","text-xs",3,"ngModelChange","ngModel"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),s(4," Z "),c(),l(5,"h1",4),s(6),c(),l(7,"p",5),s(8," Plataforma de Cidadania "),c()(),S(9,je,2,1,"div",6),l(10,"div",7),S(11,Ne,1,1,"input",8),l(12,"input",9),O("ngModelChange",function(a){return H(t.form.email,a)||(t.form.email=a),a}),c(),l(13,"input",10),O("ngModelChange",function(a){return H(t.form.password,a)||(t.form.password=a),a}),c(),l(14,"button",11),x("click",function(){return t.handleSubmit()}),s(15),c()(),l(16,"div",12)(17,"button",13),x("click",function(){return t.isLogin.set(!t.isLogin())}),s(18),c()()()()),e&2&&(n(6),g(" ",t.isLogin()?"Entrar no Zela":"Criar Conta Zela"," "),n(3),y(t.errorMessage()?9:-1),n(2),y(t.isLogin()?-1:11),n(),N("ngModel",t.form.email),n(),N("ngModel",t.form.password),n(2),g(" ",t.isLogin()?"Entrar":"Registar"," "),n(3),g(" ",t.isLogin()?"Ainda n\xE3o tens conta? Regista-te":"J\xE1 tens conta? Faz Login"," "))},dependencies:[z,ie,re,ne,M],encapsulation:2,changeDetection:0})};function He(i,o){i&1&&(l(0,"span",11),s(1,"Toque para adicionar"),c())}function Oe(i,o){if(i&1){let e=b();l(0,"button",27),x("click",function(){m(e);let r=f();return u(r.triggerFileInput())}),_(),l(1,"svg",28),w(2,"path",29),c()()}}function Fe(i,o){if(i&1){let e=b();l(0,"div",14),w(1,"img",30),l(2,"button",31),x("click",function(){let r=m(e).$index,a=f();return u(a.removePhoto(r))}),_(),l(3,"svg",32),w(4,"path",33),c()()()}if(i&2){let e=o.$implicit;n(),U("src",e,P)}}function Pe(i,o){if(i&1){let e=b();l(0,"button",34),x("click",function(){let r=m(e).$implicit,a=f();return u(a.reportData.category=r)}),s(1),c()}if(i&2){let e=o.$implicit,t=f();A("py-3 rounded-xl font-black text-[10px] uppercase transition-all "+(t.reportData.category===e?"bg-blue-600 text-white":"bg-slate-100 text-slate-500")),n(),g(" ",e," ")}}var pe=class i{close=L();success=L();categories=["LIMPEZA","INFRA","SEGURAN\xC7A","OUTROS"];photos=v([]);reportData={title:"",category:"LIMPEZA",location:"",description:""};triggerFileInput(){document.querySelector('input[type="file"]')?.click()}async handleFile(o){let e=o.target.files[0];if(e&&e&&this.photos().length<5){let t=new FileReader;t.onload=r=>{let a=new Image;a.src=r.target.result,a.onload=()=>{let h=document.createElement("canvas"),de=800,G=a.width,me=a.height;G>de&&(me*=de/G,G=de),h.width=G,h.height=me,h.getContext("2d")?.drawImage(a,0,0,G,me);let ke=h.toDataURL("image/jpeg",.6);this.photos.update(Me=>[...Me,ke])}},t.readAsDataURL(e)}}removePhoto(o){this.photos.update(e=>e.filter((t,r)=>r!==o))}submit(){this.success.emit(q(Z({},this.reportData),{photos:this.photos()})),console.warn(this.photos().length),this.close.emit()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-create-report"]],outputs:{close:"close",success:"success"},decls:45,vars:7,consts:[["fileInput",""],[1,"fixed","inset-0","z-[100]","flex","items-end","sm:items-center","justify-center","p-0","sm:p-4","bg-slate-900/60","backdrop-blur-sm"],[1,"bg-white","w-full","max-w-md","rounded-t-[3rem]","sm:rounded-[3rem]","p-8","shadow-2xl","animate-in","slide-in-from-bottom","duration-300","max-h-[90vh]","overflow-y-auto"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-xl","font-black","text-slate-900","uppercase","italic","leading-none"],[1,"p-2","bg-slate-100","rounded-full","text-slate-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["d","M6 18L18 6M6 6l12 12"],[1,"space-y-6","mb-8"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-[10px]","font-black","text-slate-400","uppercase","tracking-widest"],[1,"text-[9px]","font-bold","text-blue-500","uppercase"],[1,"flex","gap-2","overflow-x-auto","pb-2","scrollbar-hide"],[1,"flex-shrink-0","w-20","h-20","border-2","border-dashed","border-slate-200","rounded-2xl","flex","items-center","justify-center","text-slate-300","hover:border-blue-300","hover:text-blue-300","transition-all"],[1,"relative","flex-shrink-0","w-20","h-20","group"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"text-[10px]","font-black","text-slate-400","uppercase","tracking-widest","mb-2","block"],["type","text","placeholder","Ex: Vazamento de \xE1gua",1,"w-full","p-4","bg-slate-50","border-2","border-slate-100","rounded-2xl","font-bold","outline-none","focus:border-blue-200","transition-colors","text-sm",3,"ngModelChange","ngModel"],["rows","3","placeholder","Descreva a ocorr\xEAncia com mais detalhes, como situa\xE7\xE3o, urg\xEAncia, impactos...",1,"w-full","p-4","bg-slate-50","border-2","border-slate-100","rounded-2xl","font-medium","outline-none","focus:border-blue-200","transition-colors","text-sm","resize-none",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-2","gap-2"],[3,"class"],[1,"relative"],["type","text","placeholder","Rua, N\xFAmero, Bairro",1,"w-full","p-4","bg-slate-50","border-2","border-slate-100","rounded-2xl","font-bold","outline-none","focus:border-blue-200","transition-colors","text-sm","pr-12",3,"ngModelChange","ngModel"],[1,"absolute","right-4","top-1/2","-translate-y-1/2","text-slate-300"],["d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"w-full","py-5","bg-blue-600","text-white","font-black","rounded-2xl","uppercase","tracking-widest","shadow-xl","shadow-blue-200","active:scale-95","transition-all","disabled:opacity-50",3,"click","disabled"],[1,"flex-shrink-0","w-20","h-20","border-2","border-dashed","border-slate-200","rounded-2xl","flex","items-center","justify-center","text-slate-300","hover:border-blue-300","hover:text-blue-300","transition-all",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8"],["stroke-width","2.5","d","M12 4v16m8-8H4"],[1,"w-full","h-full","object-cover","rounded-2xl","border","border-slate-100",3,"src"],[1,"absolute","-top-1","-right-1","bg-red-500","text-white","rounded-full","p-1","shadow-md","hover:scale-110","transition-transform",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["stroke-width","3","d","M6 18L18 6M6 6l12 12"],[3,"click"]],template:function(e,t){if(e&1){let r=b();l(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),s(4,"Novo Alerta"),c(),l(5,"button",5),x("click",function(){return m(r),u(t.close.emit())}),_(),l(6,"svg",6),w(7,"path",7),c()()(),D(),l(8,"div",8)(9,"div")(10,"div",9)(11,"label",10),s(12),c(),S(13,He,2,0,"span",11),c(),l(14,"div",12),S(15,Oe,3,0,"button",13),T(16,Fe,5,1,"div",14,K),c(),l(18,"input",15,0),x("change",function(h){return m(r),u(t.handleFile(h))}),c()(),l(20,"div")(21,"label",16),s(22,"T\xEDtulo da Ocorr\xEAncia"),c(),l(23,"input",17),O("ngModelChange",function(h){return m(r),H(t.reportData.title,h)||(t.reportData.title=h),u(h)}),c()(),l(24,"div")(25,"label",16),s(26,"Descri\xE7\xE3o Detalhada"),c(),l(27,"textarea",18),O("ngModelChange",function(h){return m(r),H(t.reportData.description,h)||(t.reportData.description=h),u(h)}),c()(),l(28,"div")(29,"label",16),s(30,"Categoria"),c(),l(31,"div",19),T(32,Pe,2,3,"button",20,_e),c()(),l(34,"div")(35,"label",16),s(36,"Localiza\xE7\xE3o"),c(),l(37,"div",21)(38,"input",22),O("ngModelChange",function(h){return m(r),H(t.reportData.location,h)||(t.reportData.location=h),u(h)}),c(),l(39,"div",23),_(),l(40,"svg",6),w(41,"path",24)(42,"path",25),c()()()()(),D(),l(43,"button",26),x("click",function(){return m(r),u(t.submit())}),s(44," Publicar Alerta "),c()()()}e&2&&(n(12),g("Evid\xEAncias (",t.photos().length,"/5)"),n(),y(t.photos().length<5?13:-1),n(2),y(t.photos().length<5?15:-1),n(),R(t.photos()),n(7),N("ngModel",t.reportData.title),n(4),N("ngModel",t.reportData.description),n(5),R(t.categories),n(6),N("ngModel",t.reportData.location),n(5),U("disabled",!t.reportData.title||!t.reportData.location||!t.reportData.description))},dependencies:[z,ie,re,ne,M],encapsulation:2,changeDetection:0})};var Ue=(i,o)=>o.id;function Be(i,o){i&1&&w(0,"app-auth")}function ze(i,o){if(i&1){let e=b();l(0,"app-report-card",15),x("support",function(){let r=m(e).$implicit,a=f(2);return u(a.zelaService.addSupport(r.id))})("sponsor",function(){let r=m(e).$implicit,a=f(2);return u(a.openSponsor(r.id))}),c()}if(i&2){let e=o.$implicit;U("report",e)}}function We(i,o){if(i&1){let e=b();l(0,"div",0),w(1,"app-header",1),Y(2,"async"),Y(3,"async"),l(4,"main",2)(5,"div",3)(6,"h2",4),s(7,"Ocorr\xEAncias Ativas"),c(),l(8,"div",5),w(9,"div",6),c()(),T(10,ze,1,1,"app-report-card",7,Ue),c(),l(12,"nav",8)(13,"button",9),x("click",function(){m(e);let r=f();return u(r.activeTab.set("home"))}),_(),l(14,"svg",10),w(15,"path",11),c()(),D(),l(16,"button",12),x("click",function(){m(e);let r=f();return u(r.showReportModal.set(!0))}),_(),l(17,"svg",10),w(18,"path",13),c()(),D(),l(19,"button",9),x("click",function(){m(e);let r=f();return u(r.activeTab.set("profile"))}),_(),l(20,"svg",10),w(21,"path",14),c()()()()}if(i&2){let e,t=f();n(),U("user",ee(2,6,t.authService.getCurrentUser()))("balance",((e=ee(3,8,t.authService.getCurrentUser()))==null?null:e.balance)||0),n(9),R(t.zelaService.reports()),n(3),A("p-2 transition-colors "+(t.activeTab()==="home"?"text-blue-600":"text-slate-300")),n(6),A("p-2 transition-colors "+(t.activeTab()==="profile"?"text-blue-600":"text-slate-300"))}}function Ge(i,o){if(i&1){let e=b();l(0,"app-create-report",16),x("close",function(){m(e);let r=f();return u(r.showReportModal.set(!1))})("success",function(r){m(e);let a=f();return u(a.handleReportSuccess(r))}),c()}}function Ze(i,o){if(i&1){let e=b();l(0,"app-sponsor-modal",16),x("close",function(){m(e);let r=f();return u(r.showSponsorModal.set(!1))})("success",function(r){m(e);let a=f();return u(a.handleSponsorSuccess(r))}),c()}}var ye=class i{zelaService=C(W);authService=C(I);loginEmail="";activeTab=v("home");showReportModal=v(!1);showSponsorModal=v(!1);activeReportId=v(null);handleReportSuccess(o){this.zelaService.addReport(o),this.showReportModal.set(!1)}openSponsor(o){this.activeReportId.set(o),this.showSponsorModal.set(!0)}async handleSponsorSuccess(o){let e=this.activeReportId();e&&await this.zelaService.patrocinar(e,o)&&(this.showSponsorModal.set(!1),this.activeReportId.set(null))}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-root"]],decls:5,vars:5,consts:[[1,"min-h-screen","bg-slate-50","pb-32"],[3,"user","balance"],[1,"p-6","max-w-md","mx-auto"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-lg","font-black","text-slate-900","uppercase","italic"],[1,"flex","gap-1"],[1,"w-2","h-2","rounded-full","bg-blue-600","animate-pulse"],[3,"report"],[1,"fixed","bottom-0","left-0","right-0","bg-white/80","backdrop-blur-xl","border-t","border-slate-100","px-8","py-4","flex","items-center","justify-between","z-50"],[3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-width","2.5","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],[1,"w-14","h-14","bg-blue-600","text-white","rounded-2xl","flex","items-center","justify-center","shadow-xl","shadow-blue-200","-mt-10","border-4","border-white","active:scale-90","transition-transform",3,"click"],["stroke-width","3","d","M12 4v16m8-8H4"],["stroke-width","2.5","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[3,"support","sponsor","report"],[3,"close","success"]],template:function(e,t){e&1&&(S(0,Be,1,0,"app-auth"),Y(1,"async"),xe(2,We,22,10,"div",0),S(3,Ge,1,0,"app-create-report"),S(4,Ze,1,0,"app-sponsor-modal")),e&2&&(y(ee(1,3,t.authService.isAuthenticated())?2:0),n(3),y(t.showReportModal()?3:-1),n(),y(t.showSponsorModal()?4:-1))},dependencies:[M,z,se,ae,le,pe,ce,Se],encapsulation:2,changeDetection:0})};export{ye as Home};
