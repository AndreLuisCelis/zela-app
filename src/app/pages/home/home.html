@if (!zelaService.isAuthenticated()) {
  <app-auth (login)="zelaService.login($event.email, $event.password)"></app-auth>
} @else {
  <div class="min-h-screen bg-slate-50 pb-32">
    <app-header [user]="zelaService.currentUser()" [balance]="zelaService.currentUser()?.balance || 0"></app-header>
    <!-- <header
      class="bg-white px-6 py-6 flex items-center justify-between sticky top-0 z-30 border-b border-slate-100"
    >
      <div class="flex items-center gap-3">
        <div
          class="w-12 h-12 bg-blue-100 rounded-2xl overflow-hidden flex items-center justify-center"
        >
          <img [src]="zelaService.currentUser()?.avatar" class="w-full h-full object-cover" />
        </div>
        <div>
          <p class="text-[8px] font-black text-gray-400 uppercase tracking-widest">Saldo Atual</p>
          <h1 class="text-sm font-black text-amber-600 italic">
            ⭐ {{ zelaService.currentUser()?.balance }} Zelas
          </h1>
        </div>
      </div>
      <button (click)="zelaService.logout()" class="p-3 bg-slate-100 rounded-xl">
        <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path d="M17 16l4-4m0 0l-4-4m4 4H7" />
        </svg>
      </button>
    </header> -->

    <main class="p-6 max-w-md mx-auto">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-lg font-black text-slate-900 uppercase italic">Ocorrências Ativas</h2>
        <div class="flex gap-1">
          <div class="w-2 h-2 rounded-full bg-blue-600 animate-pulse"></div>
        </div>
      </div>

      @for (report of zelaService.reports(); track report.id) {
        <app-report-card
          (support)="zelaService.addSupport(report.id)"
          (sponsor)="openSponsor(report.id)"
          [report]="report"
        ></app-report-card>
      }
    </main>

    <button
      (click)="showReportModal.set(true)"
      class="fixed bottom-10 right-10 w-16 h-16 bg-blue-600 text-white rounded-3xl flex items-center justify-center shadow-2xl shadow-blue-500/50 z-40 active:scale-90 transition-transform"
    >
      <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-width="3" d="M12 4v16m8-8H4" />
      </svg>
    </button>
  </div>
}

<!-- Modais -->
@if (showReportModal()) {
  <app-create-report (close)="showReportModal.set(false)" (success)="handleReportSuccess($event)" />
}

@if (showSponsorModal()) {
  <app-sponsor-modal
    (close)="showSponsorModal.set(false)"
    (success)="handleSponsorSuccess($event)"
  />
}
